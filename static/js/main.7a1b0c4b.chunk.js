(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){},38:function(e,t,a){e.exports=a(72)},43:function(e,t,a){},68:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(31),r=a.n(i),o=(a(43),a(3)),s=a(4),l=a(6),u=a(5),m=a(7),d=a(15),h=a(12),p=a(14),g=a(16),b=a(10),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{goods:[],sum:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ITEM":return Object(b.a)({},e,{goods:Object(b.a)({},e.goods,Object(p.a)({},t.item.category,Object(g.a)(e.goods[t.item.category]||[]).concat([t.item]))),sum:Object(b.a)({},e.sum,{generalSum:(e.sum.generalSum||0)+t.item.price,categoriesSum:Object(b.a)({},e.sum.categoriesSum||[],Object(p.a)({},t.item.category,((e.sum.categoriesSum||{})[t.item.category]||0)+t.item.price))})});case"EDIT_ITEM":var a=Object(b.a)({},e,{goods:Object(b.a)({},e.goods,Object(p.a)({},t.item.category,Object(g.a)(e.goods[t.item.category]))),sum:{generalSum:(e.sum.generalSum||0)-t.item.price+t.newPrice,categoriesSum:Object(b.a)({},e.sum.categoriesSum||[],Object(p.a)({},t.item.category,((e.sum.categoriesSum||{})[t.item.category]||0)-t.item.price+t.newPrice))}});return a.goods[t.item.category]=a.goods[t.item.category].map(function(e){return e.id===t.item.id?Object(b.a)({},e,{name:t.newName,price:t.newPrice}):Object(b.a)({},e)}),a;case"DELETE_ITEM":var n=Object(b.a)({},e,{goods:Object(b.a)({},e.goods,Object(p.a)({},t.item.category,Object(g.a)(e.goods[t.item.category]))),sum:{generalSum:(e.sum.generalSum||0)-t.item.price,categoriesSum:Object(b.a)({},e.sum.categoriesSum||[],Object(p.a)({},t.item.category,((e.sum.categoriesSum||{})[t.item.category]||0)-t.item.price))}});return n.goods[t.item.category]=n.goods[t.item.category].filter(function(e){return e.id!==t.item.id}),0===n.goods[t.item.category].length&&delete n.goods[t.item.category],n;default:return e}},f=a(19),j=a(2),O={addItem:function(e){return{type:"ADD_ITEM",item:e}},editItem:function(e,t,a){return{type:"EDIT_ITEM",item:e,newName:t,newPrice:a}},deleteItem:function(e){return{type:"DELETE_ITEM",item:e}}},y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={inputFocused:!1,category:"",matchedItems:[],inputChanged:!1},a.handleClick=a.handleClick.bind(Object(j.a)(Object(j.a)(a))),a.handleFocus=a.handleFocus.bind(Object(j.a)(Object(j.a)(a))),a.handleInputChange=a.handleInputChange.bind(Object(j.a)(Object(j.a)(a))),a.fillAutoComplete=a.fillAutoComplete.bind(Object(j.a)(Object(j.a)(a))),a.handleFocusLost=a.handleFocusLost.bind(Object(j.a)(Object(j.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({matchedItems:this.fillAutoComplete("",e.values)})}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",function(t){"select"!==t.target.className&&"arrowDown"!==t.target.className&&e.setState({inputFocused:!1,inputChanged:!1}),"option"===t.target.className&&"select"!==t.target.className&&"arrowDown"!==t.target.className&&e.handleFocusLost(t)})}},{key:"handleFocusLost",value:function(){this.props.handleInputChange(this.state.category,this.props.type)}},{key:"fillAutoComplete",value:function(e,t){var a=[];if(""===e)return a=Object(g.a)(t);for(var n=0;n<t.length;n++)console.log(t[n].substr(0,e.length),e),t[n].substr(0,e.length).toLowerCase()===e.toLowerCase()&&a.push(t[n]);return a}},{key:"handleFocus",value:function(){this.setState({inputFocused:!0})}},{key:"handleClick",value:function(e){var t=e.target.innerHTML;e.target.parentNode.parentNode.childNodes[0].value=t,this.setState({category:t})}},{key:"handleInputChange",value:function(e){var t=e.target.value;this.setState({category:t,matchedItems:this.fillAutoComplete(t,this.props.values),inputChanged:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.inputFocused,n=t.matchedItems,i=t.inputChanged;Object(f.a)(t,["inputFocused","matchedItems","inputChanged"]);return c.a.createElement("div",{className:"selectBox"},c.a.createElement("input",{name:"category",placeholder:this.props.children,className:"select",onChange:this.handleInputChange,onFocus:this.handleFocus}),c.a.createElement("div",{className:"arrowDown",onClick:this.handleFocus}),a&&n.length>0||n.length>0&&i?c.a.createElement("ul",null,this.state.matchedItems.map(function(t){return c.a.createElement("li",{className:"option",onClick:e.handleClick},t)})):null)}}]),t}(n.Component),E=a(35),k=a.n(E),C=function(e){return k.a.get(e).then(function(e){try{return JSON.parse(e.request.response)}catch(t){throw new Error("Invalid response")}})},S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(j.a)(Object(j.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleClick",value:function(e){this.props.onClick(e)}},{key:"render",value:function(){return c.a.createElement("div",{className:"buttonCloud cloud",onClick:this.props.onClick?this.handleClick:null},c.a.createElement("div",null,this.props.children))}}]),t}(n.Component),w=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleAddButtonClick=e.handleAddButtonClick.bind(Object(j.a)(Object(j.a)(e))),e.handleInputChange=e.handleInputChange.bind(Object(j.a)(Object(j.a)(e))),e.clearFields=e.clearFields.bind(Object(j.a)(Object(j.a)(e))),e.clearState=e.clearState.bind(Object(j.a)(Object(j.a)(e))),e.getList=e.getList.bind(Object(j.a)(Object(j.a)(e))),e.getModel=e.getModel.bind(Object(j.a)(Object(j.a)(e))),e.state={category:"",name:"",price:"",hasErrored:!1,values:[],models:[]},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.getList()}},{key:"handleAddButtonClick",value:function(e){if(""!==this.state.category&&""!==this.state.price&&""!==this.state.name){var t={category:this.state.category,name:this.state.name,price:this.state.price,id:Date.now()};this.props.actions.addItem(t),this.clearFields(),this.clearState()}else e.preventDefault()}},{key:"clearFields",value:function(){for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++)e[t].value=""}},{key:"clearState",value:function(){this.setState({category:"",name:"",price:""})}},{key:"getList",value:function(){var e=this;C("https://developers.ria.com/auto/new/marks?category_id=1&api_key=NhVhfXAfj7Z7ns7t05E32bv5BUTMid1FIH1l61hC").then(function(t){var a=t.map(function(e){return e.name});e.setState({values:a,catalogue:t})})}},{key:"getModel",value:function(){var e=this,t=this.state.category,a=this.state.catalogue.find(function(e){if(e.name===t)return e});C("https://developers.ria.com/auto/new/models?marka_id=".concat(a.marka_id,"&category_id=1&api_key=NhVhfXAfj7Z7ns7t05E32bv5BUTMid1FIH1l61hC")).then(function(t){var a=t.map(function(e){return e.name});e.setState({models:a})})}},{key:"handleInputChange",value:function(e,t){var a,n,c=this;"category"===t||"name"===t?(a=e,n=t):(a=t.currentTarget.value,n=t.currentTarget.name),""!==a?(this.setState({hasErrored:!1}),"category"===n?this.setState({category:e},function(){return c.getModel()}):"name"===n?this.setState({name:a}):"price"===n&&this.setState({price:parseInt(a)})):this.setState({hasErrored:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.hasErrored,n=t.values,i=t.models;Object(f.a)(t,["hasErrored","values","models"]);return c.a.createElement("div",{className:"inputContainer inputBox"},c.a.createElement(y,{values:n,handleInputChange:this.handleInputChange,type:"category"},"Select category"),c.a.createElement(y,{values:0!==i.length?i:[],handleInputChange:this.handleInputChange,type:"name"},"Select name"),c.a.createElement("input",{name:"price",placeholder:"price",type:"number",onChange:function(t){return e.handleInputChange(t.target.value,t)}}),c.a.createElement(S,{onClick:this.handleAddButtonClick},"Add item"),a?c.a.createElement("div",null,c.a.createElement("b",null,"Fill all inputs")):null)}}]),t}(n.Component);var I=Object(d.b)(function(e){return{goods:e.goods}},function(e){return{actions:Object(h.a)(O,e)}})(w),N=a(73),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=a.handleInputChange.bind(Object(j.a)(Object(j.a)(a))),a.onEditClick=a.onEditClick.bind(Object(j.a)(Object(j.a)(a))),a.onSaveClick=a.onSaveClick.bind(Object(j.a)(Object(j.a)(a))),a.state={name:a.props.item.name,price:a.props.item.price,isEditable:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleInputChange",value:function(e){"name"===e.target.name?this.setState({name:e.target.value}):this.setState({price:parseInt(e.target.value)})}},{key:"onEditClick",value:function(){this.setState({isEditable:!0})}},{key:"onSaveClick",value:function(){this.setState({isEditable:!1}),this.props.editItem(this.props.item,this.state.name,this.state.price)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isEditable,n=t.name,i=t.price;return c.a.createElement("div",null,c.a.createElement("div",{className:"item"},c.a.createElement("div",{className:"name"},a?c.a.createElement("input",{value:n,name:"name",onChange:this.handleInputChange}):n),c.a.createElement("div",{className:"price"},a?c.a.createElement("input",{value:i,onChange:this.handleInputChange,name:"price"}):i)),c.a.createElement("div",{className:"buttons"},a?c.a.createElement("button",{onClick:this.onSaveClick}," Save"):c.a.createElement("button",{onClick:this.onEditClick},"Edit"),c.a.createElement("button",{onClick:function(){return e.props.deleteItem(e.props.item)}},"Delete")))}}]),t}(n.Component),F=(a(30),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.goods,a=this.props.sum;return c.a.createElement("div",{className:"itemBox"},c.a.createElement("div",null,Object.keys(t).length>0?Object.keys(t).map(function(n){return c.a.createElement("div",{key:n,className:"itemList"},c.a.createElement("h3",null,n),t[n].length>0?t[n].map(function(t){return c.a.createElement("div",{key:t.id},c.a.createElement(T,{item:t,deleteItem:e.props.actions.deleteItem,editItem:e.props.actions.editItem}))}):null,c.a.createElement("h4",null,"Category Sum: ",a.categoriesSum[n]))}):null,a.generalSum>0?c.a.createElement("div",{className:"itemList"},c.a.createElement("h3",null,"General Sum: ",a.generalSum)):null))}}]),t}(n.Component));var L=Object(d.b)(function(e){return{goods:e.goods,sum:e.sum}},function(e){return{actions:Object(h.a)(O,e)}})(F),A=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"title"},c.a.createElement("div",{className:"cloud"},c.a.createElement("div",{className:"cloudshadow"})),c.a.createElement("h1",{className:"head-title"},this.props.children)))}}]),t}(n.Component),M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(A,null,"Goods List"),c.a.createElement(I,null),c.a.createElement(L,null),c.a.createElement(S,{onClick:null},c.a.createElement(N.a,{to:"/pdf",className:"no-decoration"},"View list")))}}]),t}(n.Component),D=a(22),P=a.n(D),B=a(36),_=a.n(B);P.a.vfs=_.a.pdfMake.vfs;var x=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).makePdf=e.makePdf.bind(Object(j.a)(Object(j.a)(e))),e.generateRows=e.generateRows.bind(Object(j.a)(Object(j.a)(e))),e.generateTables=e.generateTables.bind(Object(j.a)(Object(j.a)(e))),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"generateTables",value:function(e){for(var t=Object.keys(this.props.goods),a=0;a<t.length;a++)e.content.push({text:"".concat(t[a]),style:"tableHeader"}),e.content.push({style:"table",table:{widths:"*",body:this.generateRows(t[a])}});e.content.push({text:"General Sum: ".concat(this.props.sum.generalSum," "),style:"subheader"})}},{key:"makePdf",value:function(){var e={content:[{text:"Price List",style:"header"}],styles:{header:{fontSize:18,bold:!0,margin:[0,0,0,10],alignment:"center"},subheader:{fontSize:16,bold:!0,alignment:"center"},tableBody:{margin:[10,10,10,10],alignment:"center"},tableHeader:{bold:!0,fontSize:16,color:"black",alignment:"center",margin:[10,0,0,0]}}};this.generateTables(e),P.a.createPdf(e).open()}},{key:"generateRows",value:function(e){for(var t=[["Name","Price"]],a=0;a<this.props.goods[e].length;a++){var n=[];n.push(this.props.goods[e][a].name),n.push(this.props.goods[e][a].price),t.push(n)}return t.push(["Total Sum",this.props.sum.categoriesSum[e]]),t}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("div",{className:"pdfCanvas"},c.a.createElement(A,null,"Price List"),Object.keys(this.props.goods).map(function(t){return c.a.createElement("div",{className:"itemList"},c.a.createElement("h3",null,"Category: ",t),c.a.createElement("div",{className:"listTable"},c.a.createElement("div",{className:"name-col"},"Name"),c.a.createElement("div",{className:"price-col"},"Price")),e.props.goods[t].map(function(e){return c.a.createElement("div",{className:"item"},c.a.createElement("div",{className:"name"},e.name),c.a.createElement("div",{className:"price"},e.price))}))}),this.props.sum.generalSum?c.a.createElement("h3",{className:"itemList"},"General Sum: ",this.props.sum.generalSum):null,Object.keys(this.props.goods).length>0?c.a.createElement(S,{onClick:this.makePdf},"make PDF"):c.a.createElement("div",{className:"emptyMessage"},c.a.createElement("h3",null,"Empty list. Add something to a list")),c.a.createElement(S,{onClick:null},c.a.createElement(N.a,{to:"/",className:"no-decoration"},"Back home"))))}}]),t}(n.Component);var W=Object(d.b)(function(e){return{goods:e.goods,sum:e.sum}},function(e){return{actions:Object(h.a)(O,e)}})(x),R=a(75),H=(a(68),function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}()),J=Object(h.b)(v,H);J.subscribe(function(){var e,t;e=J.getState(),t=JSON.stringify(e),localStorage.setItem("state",t)});var G=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement(d.a,{store:J},c.a.createElement("div",{className:"App"},c.a.createElement(R.a,{path:"/",exact:!0,component:M}),c.a.createElement(R.a,{path:"/pdf",exact:!0,component:W})))}}]),t}(n.Component),z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var V=a(74);r.a.render(c.a.createElement(V.a,{basename:"/goods-app"},c.a.createElement(G,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/goods-app",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/goods-app","/service-worker.js");z?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):U(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):U(e)})}}()}},[[38,2,1]]]);
//# sourceMappingURL=main.7a1b0c4b.chunk.js.map